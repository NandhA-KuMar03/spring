create schema gatekeeper;

    drop table if exists blacklist;
    drop table if exists role;
    drop table if exists user;
    drop table if exists user_details;
    drop table if exists user_role;
    drop table if exists visitor;
    drop table if exists visitor_details;

        create table visitor (
        is_black_listed TINYINT(1),
        visitor_id integer not null auto_increment,
        email varchar(255) not null unique,
        visitor_name varchar(255),
        primary key (visitor_id)
		);

    create table blacklist (
        blacklist_id integer not null auto_increment,
        email integer,
        user_id integer,
        reason varchar(255),
        primary key (blacklist_id)
    );

    create table role (
        role_id integer not null auto_increment,
        role_name varchar(255),
        primary key (role_id)
    );

    create table user (
        is_active TINYINT(1),
        is_approved TINYINT(1),
        user_id integer not null auto_increment,
        email varchar(255),
        password varchar(255),
        primary key (user_id)
    );

    create table user_details (
        dob date,
        user_detail_id integer not null auto_increment,
        user_id integer,
        apartment varchar(255),
        gender varchar(255),
        user_first_name varchar(255),
        user_last_name varchar(255),
        primary key (user_detail_id)
    );

    create table user_role (
        role_id integer not null,
        user_id integer not null
    );

    create table visitor_details (
        date_of_visit date,
        has_visited TINYINT(1),
        is_approved TINYINT(1),
        time_of_entry time(6),
        time_of_exit time(6),
        user_id integer,
        visitor_detail_id integer not null auto_increment,
        visitor_id integer,
        visitor_passkey varchar(255),
        primary key (visitor_detail_id)
    );

    alter table blacklist
       add constraint UK_qe4qf14thq14nfb4l6fd3720d unique (email);
    alter table user_details
       add constraint UK_f4pdcamta635qqbhgcyqvrg7f unique (user_id);

    alter table blacklist
       add constraint FKahige6nw0udsa7al6bfswqble
       foreign key (user_id)
       references user (user_id);

    alter table blacklist
       add constraint FK9qd2akbx8u8rwq10rqp5hjl8o
       foreign key (email)
       references visitor (visitor_id);

    alter table user_details
       add constraint FKloyyp7tdlkchecrf8bjlqsftt
       foreign key (user_id)
       references user (user_id);

    alter table user_role
       add constraint FKa68196081fvovjhkek5m97n3y
       foreign key (role_id)
       references role (role_id);

    alter table user_role
       add constraint FK859n2jvi8ivhui0rl0esws6o
       foreign key (user_id)
       references user (user_id);

    alter table visitor_details
       add constraint FK8xyqn8bfacie470mg7d4iqjk6
       foreign key (user_id)
       references user (user_id);

    alter table visitor_details
       add constraint FKm70fvu6g39pi4cu1rv5eqnl2n
       foreign key (visitor_id)
       references visitor (visitor_id);
